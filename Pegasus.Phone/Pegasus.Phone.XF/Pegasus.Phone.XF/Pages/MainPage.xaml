<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:pegasus="clr-namespace:Pegasus.Phone.XF;assembly=Pegasus.Phone.XF"
             x:Class="Pegasus.Phone.XF.MainPage">
  <Grid VerticalOptions="FillAndExpand">
    <Grid.RowDefinitions>
      <RowDefinition Height="1*" />
      <RowDefinition Height="Auto" />
      <RowDefinition Height="Auto" />
    </Grid.RowDefinitions>

    <pegasus:TelemetryOverviewView x:Name="TelemetryOverviewView" BindingContext="{Binding LocationsViewModel}" IsVisible="False" />
    <pegasus:LocationsView x:Name="LocationsView" BindingContext="{Binding LocationsViewModel}" IsVisible="False" />
    <pegasus:TelemetryDetailsView x:Name="TelemetryDetailsView" BindingContext="{Binding TelemetryDetailsViewModel}" IsVisible="False" />
    <pegasus:TextCraftView x:Name="TextCraftView" BindingContext="{Binding TelemetryDetailsViewModel}" IsVisible="False" />
    <pegasus:LinksView x:Name="LinksView" BindingContext="{Binding LocationsViewModel}" IsVisible="False" />
    <Frame x:Name="ActivityIndicatorBackground" IsVisible="False" Padding="0">
      <Grid>
        <Grid.RowDefinitions>
          <RowDefinition Height="1*" />
          <RowDefinition Height="Auto" />
          <RowDefinition Height="Auto" />
          <RowDefinition Height="1*" />
        </Grid.RowDefinitions>
        <BoxView Grid.RowSpan="4" Color="Black" HorizontalOptions="Fill" VerticalOptions="Fill" />
        <Frame Grid.Row="1">
          <Label Text="{Binding AppData.StatusMessage}" FontSize="Medium" XAlign="Center" HorizontalOptions="CenterAndExpand" VerticalOptions="CenterAndExpand" />
        </Frame>
        <ActivityIndicator Grid.Row="2" x:Name="ActivityIndicator" IsRunning="False" />
      </Grid>
    </Frame>

    <StackLayout Grid.Row="2" Orientation="Horizontal" HorizontalOptions="Center" Padding="0">
      <Image x:Name="TelemetryOverviewImage" Source="appbar_home_empty.png" />
      <Image x:Name="MapImage" Source="appbar_map_gps.png" />
      <Image x:Name="TelemetryDetailsImage" Source="appbar_gauge_25.png" />
      <Image x:Name="TextCraftImage" Source="appbar_message_send.png" />
      <Image x:Name="LinksImage" Source="appbar_link.png" />
      <Button x:Name="TestButton" Text="{Binding MessageCount}" Clicked="DoTest" WidthRequest="50" BindingContext="{Binding AppData}" />
    </StackLayout>
  </Grid>
</ContentPage>